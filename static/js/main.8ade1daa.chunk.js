(this["webpackJsonpcards-nya-front-2-0"]=this["webpackJsonpcards-nya-front-2-0"]||[]).push([[0],{118:function(e,t,n){},244:function(e,t,n){"use strict";n.r(t);var r=n(0),a=(n(117),n(118),n(21)),c=n.n(a),s=n(5),i=n(23),o=(n(72),n(2)),l=n(52),d=n.n(l),u=d.a.create(Object(o.a)({baseURL:"https://neko-back.herokuapp.com/2.0"},{withCredentials:!0})),j={updateAvatar:function(e,t){return u.put("/auth/me",{name:e,avatar:t})}},b={getAuth:function(){return u.post("auth/me",{})}},p={login:function(e){return u.post("auth/login",e)}},m={logout:function(){return u.delete("auth/me",{})}},O={forgetPassword:function(e){return d.a.post("https://neko-back.herokuapp.com/2.0/auth/forgot",{email:e,from:"test-front-admin <ai73a@yandex.by>",message:"\n<div style=\"background-color: lime; padding: 15px\">\npassword recovery link: \n<a href='https://neko-back.herokuapp.com/2.0/#/set-new-password/$token$'>link</a>\n</div>\n"})},changePasswordOnForget:function(e,t){return u.post("auth/set-new-password",{resetPasswordToken:t,password:e})}},h=function(e,t){return u.post("auth/register",{email:e,password:t})},f="@@PROFILE_REDUCER/LOG_OUT_CLEAR_STATE",x={_id:null,email:null,name:null,avatar:null,publicCardPacksCount:null,created:null,updated:null,isAdmin:null,verified:null,rememberMe:null,error:null,deviceTokens:null,token:null,tokenDeathTime:null,resetPasswordToken:null,resetPasswordTokenDeathTime:null,password:null},v=function(e){return{type:"PROFILE_CASE",data:e}},w="@@APP_REDUCER/SET_AUTH",y="@@APP_REDUCER/SET_APP_INITIALIZATE",g={isLoading:!1,isAppInitializated:!1,isAuth:!1},E=function(e){return{type:y,isAppInitializated:e}},_=function(e){return{type:"@@APP_REDUCER/PRELOADER_TOGGLE",isLoading:e}},S=function(e){return{type:w,isAuth:e}},A=function(){return function(e){e(_(!0)),b.getAuth().then((function(t){e(S(!0)),e(v(t.data)),e(_(!1)),e(E(!0))})).catch((function(t){console.dir("get Auth server error",t.response.data.error),e(S(!1)),e(_(!1)),e(E(!0))}))}},C=n(9),R=n(58),N=n.n(R),k=n(1),P=["red","className"],T=function(e){var t=e.red,n=e.className,r=Object(C.a)(e,P),a="".concat(t?N.a.red:N.a.default," ").concat(n," ").concat(N.a.button);return Object(k.jsx)("button",Object(o.a)({type:"button",className:a},r))},L=function(){return Object(k.jsxs)("div",{children:[Object(k.jsx)("h1",{children:"DEMONSTRATION COMPONENT"}),Object(k.jsx)(T,{children:"hello button"})]})},I=n(17),D=n.p+"static/media/Rocket.fc7a629f.jpg",F=n(3),q=n(13),U="/login",B="/profile",G="@@REGISTRATION_REDUCER/REGISTRATION",H={email:"",password:""},M=function(e,t){return function(n){h(e,t).then((function(r){"201"===r.status&&(console.log("registration succsess"),n(function(e,t){return{type:G,payload:{email:e,password:t}}}(e,t)))})).catch((function(e){console.dir(e.response.data.error)}))}},V=n(4),z=["label"],K=function(e){var t=e.label,n=Object(C.a)(e,z),r=Object(I.e)(n),a=Object(V.a)(r,2),c=a[0],s=a[1];return Object(k.jsxs)("div",{className:"mb-2",children:[Object(k.jsx)("label",{htmlFor:c.name,children:t}),Object(k.jsx)("input",Object(o.a)(Object(o.a)(Object(o.a)({className:"form-control shadow-none ".concat(s.touched&&s.error&&"is-invalid")},c),n),{},{autoComplete:"off"})),Object(k.jsx)(I.a,{component:"div",name:c.name,className:"error"})]})},J=function(){var e=Object(s.c)((function(e){return e.registration})),t=Object(s.c)((function(e){return e.app.isAuth})),n=Object(s.b)(),r=q.a({email:q.c().email("email is invalid").required("email is required"),password:q.c().min(7,"password must be at least 7 character").required("password is required"),confirmPassword:q.c().oneOf([q.b("password"),null],"password must match").required("confirm password is required")}).required();return t?Object(k.jsx)(F.a,{to:B}):Object(k.jsx)("div",{className:"container mt-3",children:Object(k.jsxs)("div",{className:"row",children:[Object(k.jsx)("div",{className:"col-md-5",children:Object(k.jsx)(I.d,{initialValues:{email:"",password:"",confirmPassword:""},validationSchema:r,onSubmit:function(e){var t=e.email,r=e.password;n(M(t,r))},children:function(){return Object(k.jsxs)("div",{children:[Object(k.jsx)("h1",{className:"my-4 font-weght-bold display-4",children:"Sign Up"}),Object(k.jsxs)(I.c,{children:[Object(k.jsx)(K,{label:"E-mail",name:"email",type:"text"}),Object(k.jsx)(K,{label:"Password",name:"password",type:"password"}),Object(k.jsx)(K,{label:"Confirm password",name:"confirmPassword",type:"password"}),Object(k.jsx)("button",{className:"btn btn-primary mt-3",type:"submit",children:"Register"}),Object(k.jsx)("button",{className:"btn btn-danger mt-3 mx-lg-3",type:"reset",children:"Reset"})]}),e.email.length>0?Object(k.jsxs)("h1",{style:{color:"green"},children:["Register successful with e-mail: ",e.email]}):null]})}})}),Object(k.jsx)("div",{className:"col-md-7 my-auto",children:Object(k.jsx)("img",{className:"img-fluid w-75",src:D,alt:"rocket"})})]})})},W=function(){return Object(k.jsx)("div",{style:{height:"100vh"},className:"row justify-content-center align-items-center",children:Object(k.jsx)("div",{className:"lds-hourglass "})})},X=function(){return function(e){e(_(!0)),m.logout().then((function(t){console.dir(t),e(S(!1)),e({type:f}),e(_(!1))})).catch((function(t){console.dir("get Auth server error",t.response.data.error),e(_(!1))}))}},$=n(70),Z=n.n($),Q=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.profile})),n=Object(s.c)((function(e){return e.profile.name})),r=Object(s.c)((function(e){return e.app.isAuth}));if(!Object(s.c)((function(e){return e.app.isAppInitializated})))return Object(k.jsx)(W,{});if(!r)return Object(k.jsx)(F.a,{to:U});return Object(k.jsxs)("div",{children:[Object(k.jsx)("span",{children:"Profile Component render"}),r&&Object(k.jsxs)("div",{children:[Object(k.jsx)("div",{className:Z.a.containerAvatar,children:Object(k.jsx)("img",{className:Z.a.avatar,src:t.avatar?t.avatar:"",alt:""})}),Object(k.jsx)("input",{type:"file",onChange:function(t){if(t&&n&&t.currentTarget.files){var r=new FileReader;r.onload=function(t){e(function(e,t){return function(n){j.updateAvatar(e,t).then((function(e){n(A())})).catch((function(e){console.dir(Object(o.a)({},e))}))}}(n,t.target.result))},r.readAsDataURL(t.currentTarget.files[0])}}}),Object(k.jsxs)("h2",{children:["My name is: ",t.name]}),Object(k.jsxs)("p",{children:["Date of Create:",t.created]}),Object(k.jsx)("button",{onClick:function(){e(X())},children:"Logout"})]})]})},Y={isLogin:!1},ee=function(){var e=Object(s.c)((function(e){return e.app.isAuth})),t=Object(s.b)();if(e)return Object(k.jsx)(F.a,{to:B});var n=q.a({email:q.c().email("email is invalid").required("email is required"),password:q.c().min(7,"password must be at least 7 character").required("password is required")}).required();return Object(k.jsx)("div",{className:"container mt-3",children:Object(k.jsxs)("div",{className:"row",children:[Object(k.jsx)("div",{className:"col-md-5",children:Object(k.jsx)(I.d,{initialValues:{email:"",password:"",rememberMe:!1},validationSchema:n,onSubmit:function(e){var n;t((n=e,function(e){e(_(!0)),p.login(n).then((function(t){e(S(!0)),e(v(t.data)),e(_(!1))})).catch((function(t){console.dir("Login server error",t.response.data.error),e(S(!1)),e(_(!1))}))}))},children:function(){return Object(k.jsxs)("div",{children:[Object(k.jsx)("h1",{className:"my-4 font-weght-bold display-4",children:"LOGIN"}),Object(k.jsxs)(I.c,{children:[Object(k.jsx)(K,{label:"E-mail",name:"email",type:"text"}),Object(k.jsx)(K,{label:"Password",name:"password",type:"password"}),Object(k.jsx)("div",{children:Object(k.jsx)(I.b,{type:"checkbox",name:"rememberMe"})}),Object(k.jsx)("button",{className:"btn btn-dark mt-3",type:"submit",children:"Login"}),Object(k.jsx)("button",{style:{marginLeft:"20px"},className:"btn btn-danger mt-3",type:"reset",children:"Reset"})]})]})}})}),Object(k.jsx)("div",{className:"col-md-7 my-auto",children:Object(k.jsx)("img",{className:"img-fluid w-75",src:D,alt:"rocket"})})]})})},te=n(246),ne=n(247),re=function(e){var t=e.email?e.email:"";return Object(k.jsxs)(te.a,{show:e.show,children:[Object(k.jsx)(te.a.Header,{closeButton:!0,children:Object(k.jsx)(te.a.Title,{children:"Info"})}),Object(k.jsx)(te.a.Body,{children:"".concat(e.text," ").concat(t)}),Object(k.jsx)(te.a.Footer,{children:Object(k.jsx)(ne.a,{variant:"secondary",onClick:function(){e.setShow(!1)},children:"Close"})})]})},ae=function(e){var t=e.email?e.email:"",n=function(){e.setShow(!1)};return Object(k.jsxs)(te.a,{show:e.show,onHide:n,children:[Object(k.jsx)(te.a.Header,{closeButton:!0,children:Object(k.jsx)(te.a.Title,{children:"Error"})}),Object(k.jsx)(te.a.Body,{style:{color:"red"},children:"".concat(e.error," ").concat(t)}),Object(k.jsx)(te.a.Footer,{children:Object(k.jsx)(ne.a,{variant:"secondary",onClick:n,children:"Close"})})]})},ce={email:"",info:"",toggle:!1,error:""},se=function(e){return{type:"EMAIL_SET_CASE",payload:{email:e}}},ie=function(e){return{type:"TOOGL_SET_CASE",payload:{toggle:e}}},oe=function(){console.log("RecoveryPass Render");var e=q.a({email:q.c().email("email is invalid").required("email is required")}).required(),t=Object(s.c)((function(e){return e.forgetPassword})),n=Object(s.b)();if(Object(s.c)((function(e){return e.app.isAuth})))return Object(k.jsx)(F.a,{to:B});var a=Object(r.useState)(!1),c=Object(V.a)(a,2),i=c[0],o=c[1];return Object(k.jsxs)("div",{className:"container mt-3",id:"213213123123",children:[t.error&&Object(k.jsx)(ae,{error:t.error,show:i,setShow:o,email:t.email}),t.info&&Object(k.jsx)(re,{text:t.info,show:i,setShow:o,email:t.email}),Object(k.jsxs)("div",{className:"row",children:[Object(k.jsx)("div",{className:"col-md-5",children:Object(k.jsx)(I.d,{initialValues:{email:""},validationSchema:e,onSubmit:function(e){var t=e.email;n(function(e){return function(t){t(se(e)),O.forgetPassword(e).then((function(e){t(ie(!0)),t({type:"INFO_SET_CASE",payload:{info:e.data.info}})})).catch((function(e){var n,r,a;(null===(n=e.response)||void 0===n?void 0:n.data.error)&&t({type:"ERROR_SET_CASE",payload:{error:e.response.data.error}}),(null===(r=e.response)||void 0===r?void 0:r.data.email)&&t(se(null===(a=e.response)||void 0===a?void 0:a.data.email)),t(ie(!0)),console.log(e)}))}}(t)),o(!0)},children:function(){return Object(k.jsxs)("div",{children:[Object(k.jsx)("h1",{className:"my-4 font-weght-bold display-4",children:"Enter your email please"}),Object(k.jsxs)(I.c,{children:[Object(k.jsx)(K,{label:"E-mail",name:"email",type:"text"}),Object(k.jsx)("button",{className:"btn btn-dark mt-3",type:"submit",children:"Enter"}),Object(k.jsx)("button",{style:{marginLeft:"20px"},className:"btn btn-danger mt-3",type:"reset",children:"Reset"})]})]})}})}),Object(k.jsx)("div",{className:"col-md-7 my-auto",children:Object(k.jsx)("img",{className:"img-fluid w-75",src:D,alt:"rocket"})})]})]})},le={password:"",token:"",info:null,error:null},de=function(e){return{type:"SET_ERROR_CASE",payload:{error:e}}},ue=function(){var e=Object(s.b)(),t=Object(F.h)().token;Object(r.useEffect)((function(){t&&e(function(e){return{type:"SET_TOKEN_CASE",payload:{token:e}}}(t))}),[]);var n=q.a({password:q.c().min(8,"password must be at least 8 character").required("password is required"),confirmPassword:q.c().oneOf([q.b("password"),null],"password must match").required("confirm password is required")}).required(),a=Object(s.c)((function(e){return e.recoveryPasswordReducer})),c=a.info,i=a.error,o=Object(r.useState)(!1),l=Object(V.a)(o,2),d=l[0],u=l[1];return Object(k.jsx)("div",{className:"container mt-3",children:Object(k.jsxs)("div",{className:"row",children:[Object(k.jsx)("div",{className:"col-md-5",children:Object(k.jsx)(I.d,{initialValues:{password:""},validationSchema:n,onSubmit:function(n){var r=n.password;t&&(e(function(e,t){return function(n){O.changePasswordOnForget(e,t).then((function(e){n({type:"SET_INFO_CASE",payload:{info:e.data.info}})})).catch((function(e){var t;(null===(t=e.response)||void 0===t?void 0:t.data.error)&&n(de(e.response.data.error)),setTimeout((function(){n(de(""))}),5e3)}))}}(r,t)),u(!0))},children:function(){return Object(k.jsxs)("div",{children:[Object(k.jsx)("h1",{className:"my-4 font-weght-bold display-4",children:"Create new password"}),i&&Object(k.jsx)(ae,{error:i,show:d,setShow:u}),c&&Object(k.jsx)(re,{text:c,show:d,setShow:u}),Object(k.jsxs)(I.c,{children:[Object(k.jsx)(K,{label:"Password",name:"password",type:"password"}),Object(k.jsx)(K,{label:"Confirm password",name:"confirmPassword",type:"password"}),Object(k.jsx)("button",{className:"btn btn-dark mt-3",type:"submit",children:"Accept"}),Object(k.jsx)("button",{style:{marginLeft:"20px"},className:"btn btn-danger mt-3",type:"reset",children:"Reset"})]})]})}})}),Object(k.jsx)("div",{className:"col-md-7 my-auto",children:Object(k.jsx)("img",{className:"img-fluid w-75",src:D,alt:"rocket"})})]})})},je=function(){return Object(k.jsx)("div",{children:Object(k.jsx)("h1",{children:"NOT FOUND 404"})})},be=function(){return Object(k.jsx)(ue,{})},pe=function(){return u.get("cards/pack")},me="@@PACKS_REDUCER/SET_CARD_PACKS",Oe={cardPacks:[{_id:"",user_id:"",user_name:"",private:!1,name:"",path:"",cardsCount:0,grade:0,shots:0,rating:0,type:"",created:"",updated:"",__v:0}],token:"",cardPacksTotalCount:0,maxCardsCount:0,minCardsCount:0,page:0,pageCount:0},he=function(){return function(e){pe().then((function(t){var n;console.dir(t),e((n=t.data,{type:me,payload:n}))})).catch((function(e){console.log(e)}))}},fe=function(e){var t=e.model,n=e.data,r=e.headerStyle,a=e.tableStyle,c=e.rowsStyle,s=e.rowStyle;return Object(k.jsxs)("div",{style:Object(o.a)({margin:"0 10px",display:"flex",flexFlow:"column",alignItems:"center",justifyContent:"center"},a),children:["table",Object(k.jsx)("div",{style:Object(o.a)({border:"1px solid red",width:"100%",display:"flex",flexFlow:"row",alignItems:"center",justifyContent:"center"},r),children:t.map((function(e,t){return e.title(t)}))}),Object(k.jsx)("div",{style:Object(o.a)({border:"1px solid lime",width:"100%"},c),children:n.map((function(e,n){return Object(k.jsx)("div",{style:Object(o.a)({width:"100%",display:"flex",flexFlow:"row",alignItems:"center",justifyContent:"center"},s),children:t.map((function(t,r){return t.render(e,r,n)}))},e._id||n)}))})]})},xe=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.cardPacks.cardPacks}));return Object(k.jsxs)("div",{children:[Object(k.jsx)("button",{type:"button",onClick:function(){e(he())},children:"GET CARD PACKS"}),Object(k.jsx)(fe,{model:[{title:function(e){return Object(k.jsx)("div",{style:{width:"60%"},children:"CardPacks"},e)},render:function(e,t){return Object(k.jsx)("div",{style:{width:"60%"},children:e.name},t)}}],data:t})]})},ve=[{path:"/",component:Object(k.jsx)(Q,{})},{path:U,component:Object(k.jsx)(ee,{})},{path:"/register",component:Object(k.jsx)(J,{})},{path:B,component:Object(k.jsx)(Q,{})},{path:"/recovery",component:Object(k.jsx)(oe,{})},{path:"/newpass",component:Object(k.jsx)(be,{})},{path:"/demonstration",component:Object(k.jsx)(L,{})},{path:"/set-new-password/:token",component:Object(k.jsx)(ue,{})},{path:"*",component:Object(k.jsx)(je,{})},{path:"/cardpacks",component:Object(k.jsx)(xe,{})}],we=function(){return Object(k.jsx)(F.d,{children:ve.map((function(e){var t=e.path,n=e.component;return Object(k.jsx)(F.b,{path:t,element:n},t)}))})},ye=n(39),ge=n.n(ye),Ee=function(){var e=Object(s.c)((function(e){return e.app.isAuth})),t=ve.map((function(t){var n=t.path;return e&&n===U?"":Object(k.jsxs)(i.b,{className:ge.a.Link,to:n,children:[" ",Object(k.jsx)("span",{style:{padding:"5px"},children:n})]},n)}));return Object(k.jsxs)("div",{className:ge.a.dropdown,children:[Object(k.jsx)("div",{className:ge.a.DropButton,children:Object(k.jsx)("div",{className:ge.a.middleLine})}),Object(k.jsx)("div",{className:ge.a.DropdownContent,children:t})]})},_e=function(){var e=Object(s.b)();return Object(r.useEffect)((function(){e(A())}),[]),Object(k.jsxs)("div",{children:[Object(k.jsx)(Ee,{}),Object(k.jsx)(we,{})]})},Se=function(){return Object(k.jsx)("div",{className:"App",children:Object(k.jsx)(_e,{})})},Ae=n(59),Ce=n(113),Re="@@APP_REDUCER/SET_ERROR",Ne="@@APP_REDUCER/RESET_ERROR",ke={isError:!1,textError:""},Pe=Object(Ae.b)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return Object(o.a)(Object(o.a)({},e),{},{isAppInitializated:t.isAppInitializated});case"@@APP_REDUCER/PRELOADER_TOGGLE":return Object(o.a)(Object(o.a)({},e),{},{isLoading:t.isLoading});case w:return Object(o.a)(Object(o.a)({},e),{},{isAuth:t.isAuth});default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Re:return Object(o.a)(Object(o.a)({},e),{},{isError:t.isError,textError:t.textError});case Ne:return Object(o.a)(Object(o.a)({},e),{},{isError:!1,textError:""});default:return e}},login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;return"LOGIN_CASE"===t.type?Object(o.a)(Object(o.a)({},e),t.data):e},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PROFILE_CASE":return Object(o.a)(Object(o.a)({},e),t.data);case f:return Object(o.a)({},x);case"ADD-AVATAR":return Object(o.a)(Object(o.a)({},e),{},{avatar:t.avatar});default:return e}},forgetPassword:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"EMAIL_SET_CASE":case"TOOGL_SET_CASE":case"ERROR_SET_CASE":case"INFO_SET_CASE":return Object(o.a)(Object(o.a)({},e),t.payload);default:return e}},registration:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;return t.type===G?Object(o.a)(Object(o.a)({},e),t.payload):e},recoveryPasswordReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PASSWORD_CASE":case"SET_TOKEN_CASE":case"SET_ERROR_CASE":case"SET_INFO_CASE":return Object(o.a)(Object(o.a)({},e),t.payload);default:return e}},cardPacks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,t=arguments.length>1?arguments[1]:void 0;return t.type===me?Object(o.a)(Object(o.a)(Object(o.a)({},e),t.payload),{},{cardPacks:t.payload.cardPacks}):e}}),Te=Object(Ae.c)(Pe,Object(Ae.a)(Ce.a));window.store=Te;var Le=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,248)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};c.a.render(Object(k.jsx)(s.a,{store:Te,children:Object(k.jsx)(i.a,{basename:"/",children:Object(k.jsx)(Se,{})})}),document.getElementById("root")),Le()},39:function(e,t,n){e.exports={dropdown:"Header_dropdown__2keX3",DropButton:"Header_DropButton__1MGSb",middleLine:"Header_middleLine__39Xas",DropdownContent:"Header_DropdownContent__3HFgI",Link:"Header_Link___xrk3"}},58:function(e,t,n){e.exports={default:"SuperButton_default__2vf1J",red:"SuperButton_red__12zn9",button:"SuperButton_button__3mVpS",blink:"SuperButton_blink__WVCCC"}},70:function(e,t,n){e.exports={containerAvatar:"profile-style_containerAvatar__1k6OI",avatar:"profile-style_avatar__1bW1-"}},72:function(e,t,n){}},[[244,1,2]]]);
//# sourceMappingURL=main.8ade1daa.chunk.js.map