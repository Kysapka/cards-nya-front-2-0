(this["webpackJsonpcards-nya-front-2-0"]=this["webpackJsonpcards-nya-front-2-0"]||[]).push([[0],{118:function(e,t,n){},244:function(e,t,n){"use strict";n.r(t);var r=n(0),a=(n(117),n(118),n(21)),c=n.n(a),s=n(8),o=n(23),i=(n(72),n(2)),l=n(52),d=n.n(l),u=d.a.create(Object(i.a)({baseURL:"https://neko-back.herokuapp.com/2.0"},{withCredentials:!0})),j={updateAvatar:function(e,t){return u.put("/auth/me",{name:e,avatar:t})}},b={getAuth:function(){return u.post("auth/me",{})}},m={login:function(e){return u.post("auth/login",e)}},O={logout:function(){return u.delete("auth/me",{})}},p={forgetPassword:function(e){return d.a.post("https://neko-back.herokuapp.com/2.0/auth/forgot",{email:e,from:"test-front-admin <ai73a@yandex.by>",message:"\n<div style=\"background-color: lime; padding: 15px\">\npassword recovery link: \n<a href='http://localhost:3000/#/set-new-password/$token$'>link</a>\n</div>\n"})},changePasswordOnForget:function(e,t){return u.post("auth/set-new-password",{resetPasswordToken:t,password:e})}},h=function(e,t){return u.post("auth/register",{email:e,password:t})},f="@@PROFILE_REDUCER/LOG_OUT_CLEAR_STATE",x={_id:null,email:null,name:null,avatar:null,publicCardPacksCount:null,created:null,updated:null,isAdmin:null,verified:null,rememberMe:null,error:null,deviceTokens:null,token:null,tokenDeathTime:null,resetPasswordToken:null,resetPasswordTokenDeathTime:null,password:null},v=function(e){return{type:"PROFILE_CASE",data:e}},w="@@APP_REDUCER/SET_AUTH",g="@@APP_REDUCER/SET_APP_INITIALIZATE",E={isLoading:!1,isAppInitializated:!1,isAuth:!1},y=function(e){return{type:g,isAppInitializated:e}},_=function(e){return{type:"@@APP_REDUCER/PRELOADER_TOGGLE",isLoading:e}},A=function(e){return{type:w,isAuth:e}},S=function(){return function(e){e(_(!0)),b.getAuth().then((function(t){e(A(!0)),e(v(t.data)),e(_(!1)),e(y(!0))})).catch((function(t){console.dir("get Auth server error",t.response.data.error),e(A(!1)),e(_(!1)),e(y(!0))}))}},N=n(9),R=n(58),T=n.n(R),C=n(1),P=["red","className"],k=function(e){var t=e.red,n=e.className,r=Object(N.a)(e,P),a="".concat(t?T.a.red:T.a.default," ").concat(n," ").concat(T.a.button);return Object(C.jsx)("button",Object(i.a)({type:"button",className:a},r))},L=function(){return Object(C.jsxs)("div",{children:[Object(C.jsx)("h1",{children:"DEMONSTRATION COMPONENT"}),Object(C.jsx)(k,{children:"hello button"})]})},I=n(17),D=n.p+"static/media/Rocket.fc7a629f.jpg",q=n(3),F=n(13),U="/login",B="/profile",G="@@REGISTRATION_REDUCER/REGISTRATION",H={email:"",password:""},M=function(e,t){return function(n){h(e,t).then((function(r){"201"===r.status&&(console.log("registration succsess"),n(function(e,t){return{type:G,payload:{email:e,password:t}}}(e,t)))})).catch((function(e){console.dir(e.response.data.error)}))}},V=n(4),z=["label"],J=function(e){var t=e.label,n=Object(N.a)(e,z),r=Object(I.e)(n),a=Object(V.a)(r,2),c=a[0],s=a[1];return Object(C.jsxs)("div",{className:"mb-2",children:[Object(C.jsx)("label",{htmlFor:c.name,children:t}),Object(C.jsx)("input",Object(i.a)(Object(i.a)(Object(i.a)({className:"form-control shadow-none ".concat(s.touched&&s.error&&"is-invalid")},c),n),{},{autoComplete:"off"})),Object(C.jsx)(I.a,{component:"div",name:c.name,className:"error"})]})},W=function(){var e=Object(s.c)((function(e){return e.registration})),t=Object(s.c)((function(e){return e.app.isAuth})),n=Object(s.b)(),r=F.a({email:F.c().email("email is invalid").required("email is required"),password:F.c().min(7,"password must be at least 7 character").required("password is required"),confirmPassword:F.c().oneOf([F.b("password"),null],"password must match").required("confirm password is required")}).required();return t?Object(C.jsx)(q.a,{to:B}):Object(C.jsx)("div",{className:"container mt-3",children:Object(C.jsxs)("div",{className:"row",children:[Object(C.jsx)("div",{className:"col-md-5",children:Object(C.jsx)(I.d,{initialValues:{email:"",password:"",confirmPassword:""},validationSchema:r,onSubmit:function(e){var t=e.email,r=e.password;n(M(t,r))},children:function(){return Object(C.jsxs)("div",{children:[Object(C.jsx)("h1",{className:"my-4 font-weght-bold display-4",children:"Sign Up"}),Object(C.jsxs)(I.c,{children:[Object(C.jsx)(J,{label:"E-mail",name:"email",type:"text"}),Object(C.jsx)(J,{label:"Password",name:"password",type:"password"}),Object(C.jsx)(J,{label:"Confirm password",name:"confirmPassword",type:"password"}),Object(C.jsx)("button",{className:"btn btn-primary mt-3",type:"submit",children:"Register"}),Object(C.jsx)("button",{className:"btn btn-danger mt-3 mx-lg-3",type:"reset",children:"Reset"})]}),e.email.length>0?Object(C.jsxs)("h1",{style:{color:"green"},children:["Register successful with e-mail: ",e.email]}):null]})}})}),Object(C.jsx)("div",{className:"col-md-7 my-auto",children:Object(C.jsx)("img",{className:"img-fluid w-75",src:D,alt:"rocket"})})]})})},K=function(){return Object(C.jsx)("div",{style:{height:"100vh"},className:"row justify-content-center align-items-center",children:Object(C.jsx)("div",{className:"lds-hourglass "})})},X=function(){return function(e){e(_(!0)),O.logout().then((function(t){console.dir(t),e(A(!1)),e({type:f}),e(_(!1))})).catch((function(t){console.dir("get Auth server error",t.response.data.error),e(_(!1))}))}},$=n(70),Z=n.n($),Q=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.profile})),n=Object(s.c)((function(e){return e.profile.name})),r=Object(s.c)((function(e){return e.app.isAuth}));if(!Object(s.c)((function(e){return e.app.isAppInitializated})))return Object(C.jsx)(K,{});if(!r)return Object(C.jsx)(q.a,{to:U});return Object(C.jsxs)("div",{children:[Object(C.jsx)("span",{children:"Profile Component render"}),r&&Object(C.jsxs)("div",{children:[Object(C.jsx)("div",{className:Z.a.containerAvatar,children:Object(C.jsx)("img",{className:Z.a.avatar,src:t.avatar?t.avatar:"",alt:""})}),Object(C.jsx)("input",{type:"file",onChange:function(t){if(t&&n&&t.currentTarget.files){var r=new FileReader;r.onload=function(t){e(function(e,t){return function(n){j.updateAvatar(e,t).then((function(e){n(S())})).catch((function(e){console.dir(Object(i.a)({},e))}))}}(n,t.target.result))},r.readAsDataURL(t.currentTarget.files[0])}}}),Object(C.jsxs)("h2",{children:["My name is: ",t.name]}),Object(C.jsxs)("p",{children:["Date of Create:",t.created]}),Object(C.jsx)("button",{onClick:function(){e(X())},children:"Logout"})]})]})},Y={isLogin:!1},ee=function(){var e=Object(s.c)((function(e){return e.app.isAuth})),t=Object(s.b)();if(e)return Object(C.jsx)(q.a,{to:B});var n=F.a({email:F.c().email("email is invalid").required("email is required"),password:F.c().min(7,"password must be at least 7 character").required("password is required")}).required();return Object(C.jsx)("div",{className:"container mt-3",children:Object(C.jsxs)("div",{className:"row",children:[Object(C.jsx)("div",{className:"col-md-5",children:Object(C.jsx)(I.d,{initialValues:{email:"",password:"",rememberMe:!1},validationSchema:n,onSubmit:function(e){var n;t((n=e,function(e){e(_(!0)),m.login(n).then((function(t){e(A(!0)),e(v(t.data)),e(_(!1))})).catch((function(t){console.dir("Login server error",t.response.data.error),e(A(!1)),e(_(!1))}))}))},children:function(){return Object(C.jsxs)("div",{children:[Object(C.jsx)("h1",{className:"my-4 font-weght-bold display-4",children:"LOGIN"}),Object(C.jsxs)(I.c,{children:[Object(C.jsx)(J,{label:"E-mail",name:"email",type:"text"}),Object(C.jsx)(J,{label:"Password",name:"password",type:"password"}),Object(C.jsx)("div",{children:Object(C.jsx)(I.b,{type:"checkbox",name:"rememberMe"})}),Object(C.jsx)("button",{className:"btn btn-dark mt-3",type:"submit",children:"Login"}),Object(C.jsx)("button",{style:{marginLeft:"20px"},className:"btn btn-danger mt-3",type:"reset",children:"Reset"})]})]})}})}),Object(C.jsx)("div",{className:"col-md-7 my-auto",children:Object(C.jsx)("img",{className:"img-fluid w-75",src:D,alt:"rocket"})})]})})},te=n(246),ne=n(247),re=function(e){var t=e.email?e.email:"";return Object(C.jsxs)(te.a,{show:e.show,children:[Object(C.jsx)(te.a.Header,{closeButton:!0,children:Object(C.jsx)(te.a.Title,{children:"Info"})}),Object(C.jsx)(te.a.Body,{children:"".concat(e.text," ").concat(t)}),Object(C.jsx)(te.a.Footer,{children:Object(C.jsx)(ne.a,{variant:"secondary",onClick:function(){e.setShow(!1)},children:"Close"})})]})},ae=function(e){var t=e.email?e.email:"",n=function(){e.setShow(!1)};return Object(C.jsxs)(te.a,{show:e.show,onHide:n,children:[Object(C.jsx)(te.a.Header,{closeButton:!0,children:Object(C.jsx)(te.a.Title,{children:"Error"})}),Object(C.jsx)(te.a.Body,{style:{color:"red"},children:"".concat(e.error," ").concat(t)}),Object(C.jsx)(te.a.Footer,{children:Object(C.jsx)(ne.a,{variant:"secondary",onClick:n,children:"Close"})})]})},ce={email:"",info:"",toggle:!1,error:""},se=function(e){return{type:"EMAIL_SET_CASE",payload:{email:e}}},oe=function(e){return{type:"TOOGL_SET_CASE",payload:{toggle:e}}},ie=function(){console.log("RecoveryPass Render");var e=F.a({email:F.c().email("email is invalid").required("email is required")}).required(),t=Object(s.c)((function(e){return e.forgetPassword})),n=Object(s.b)();if(Object(s.c)((function(e){return e.app.isAuth})))return Object(C.jsx)(q.a,{to:B});var a=Object(r.useState)(!1),c=Object(V.a)(a,2),o=c[0],i=c[1];return Object(C.jsxs)("div",{className:"container mt-3",id:"213213123123",children:[t.error&&Object(C.jsx)(ae,{error:t.error,show:o,setShow:i,email:t.email}),t.info&&Object(C.jsx)(re,{text:t.info,show:o,setShow:i,email:t.email}),Object(C.jsxs)("div",{className:"row",children:[Object(C.jsx)("div",{className:"col-md-5",children:Object(C.jsx)(I.d,{initialValues:{email:""},validationSchema:e,onSubmit:function(e){var t=e.email;n(function(e){return function(t){t(se(e)),p.forgetPassword(e).then((function(e){t(oe(!0)),t({type:"INFO_SET_CASE",payload:{info:e.data.info}})})).catch((function(e){var n,r,a;(null===(n=e.response)||void 0===n?void 0:n.data.error)&&t({type:"ERROR_SET_CASE",payload:{error:e.response.data.error}}),(null===(r=e.response)||void 0===r?void 0:r.data.email)&&t(se(null===(a=e.response)||void 0===a?void 0:a.data.email)),t(oe(!0)),console.log(e)}))}}(t)),i(!0)},children:function(){return Object(C.jsxs)("div",{children:[Object(C.jsx)("h1",{className:"my-4 font-weght-bold display-4",children:"Enter your email please"}),Object(C.jsxs)(I.c,{children:[Object(C.jsx)(J,{label:"E-mail",name:"email",type:"text"}),Object(C.jsx)("button",{className:"btn btn-dark mt-3",type:"submit",children:"Enter"}),Object(C.jsx)("button",{style:{marginLeft:"20px"},className:"btn btn-danger mt-3",type:"reset",children:"Reset"})]})]})}})}),Object(C.jsx)("div",{className:"col-md-7 my-auto",children:Object(C.jsx)("img",{className:"img-fluid w-75",src:D,alt:"rocket"})})]})]})},le={password:"",token:"",info:null,error:null},de=function(e){return{type:"SET_ERROR_CASE",payload:{error:e}}},ue=function(){var e=Object(s.b)(),t=Object(q.h)().token;Object(r.useEffect)((function(){t&&e(function(e){return{type:"SET_TOKEN_CASE",payload:{token:e}}}(t))}),[]);var n=F.a({password:F.c().min(8,"password must be at least 8 character").required("password is required"),confirmPassword:F.c().oneOf([F.b("password"),null],"password must match").required("confirm password is required")}).required(),a=Object(s.c)((function(e){return e.recoveryPasswordReducer})),c=a.info,o=a.error,i=Object(r.useState)(!1),l=Object(V.a)(i,2),d=l[0],u=l[1];return Object(C.jsx)("div",{className:"container mt-3",children:Object(C.jsxs)("div",{className:"row",children:[Object(C.jsx)("div",{className:"col-md-5",children:Object(C.jsx)(I.d,{initialValues:{password:""},validationSchema:n,onSubmit:function(n){var r=n.password;t&&(e(function(e,t){return function(n){p.changePasswordOnForget(e,t).then((function(e){n({type:"SET_INFO_CASE",payload:{info:e.data.info}})})).catch((function(e){var t;(null===(t=e.response)||void 0===t?void 0:t.data.error)&&n(de(e.response.data.error)),setTimeout((function(){n(de(""))}),5e3)}))}}(r,t)),u(!0))},children:function(){return Object(C.jsxs)("div",{children:[Object(C.jsx)("h1",{className:"my-4 font-weght-bold display-4",children:"Create new password"}),o&&Object(C.jsx)(ae,{error:o,show:d,setShow:u}),c&&Object(C.jsx)(re,{text:c,show:d,setShow:u}),Object(C.jsxs)(I.c,{children:[Object(C.jsx)(J,{label:"Password",name:"password",type:"password"}),Object(C.jsx)(J,{label:"Confirm password",name:"confirmPassword",type:"password"}),Object(C.jsx)("button",{className:"btn btn-dark mt-3",type:"submit",children:"Accept"}),Object(C.jsx)("button",{style:{marginLeft:"20px"},className:"btn btn-danger mt-3",type:"reset",children:"Reset"})]})]})}})}),Object(C.jsx)("div",{className:"col-md-7 my-auto",children:Object(C.jsx)("img",{className:"img-fluid w-75",src:D,alt:"rocket"})})]})})},je=function(){return Object(C.jsx)("div",{children:Object(C.jsx)("h1",{children:"NOT FOUND 404"})})},be=function(){return Object(C.jsx)(ue,{})},me=[{path:"/",component:Object(C.jsx)(Q,{})},{path:U,component:Object(C.jsx)(ee,{})},{path:"/register",component:Object(C.jsx)(W,{})},{path:B,component:Object(C.jsx)(Q,{})},{path:"/recovery",component:Object(C.jsx)(ie,{})},{path:"/newpass",component:Object(C.jsx)(be,{})},{path:"/demonstration",component:Object(C.jsx)(L,{})},{path:"/set-new-password/:token",component:Object(C.jsx)(ue,{})},{path:"*",component:Object(C.jsx)(je,{})}],Oe=function(){return Object(C.jsx)(q.d,{children:me.map((function(e){var t=e.path,n=e.component;return Object(C.jsx)(q.b,{path:t,element:n},t)}))})},pe=n(39),he=n.n(pe),fe=function(){var e=Object(s.c)((function(e){return e.app.isAuth})),t=me.map((function(t){var n=t.path;return e&&n===U?"":Object(C.jsxs)(o.b,{className:he.a.Link,to:n,children:[" ",Object(C.jsx)("span",{style:{padding:"5px"},children:n})]},n)}));return Object(C.jsxs)("div",{className:he.a.dropdown,children:[Object(C.jsx)("div",{className:he.a.DropButton,children:Object(C.jsx)("div",{className:he.a.middleLine})}),Object(C.jsx)("div",{className:he.a.DropdownContent,children:t})]})},xe=function(){var e=Object(s.b)();return Object(r.useEffect)((function(){e(S())}),[]),Object(C.jsxs)("div",{children:[Object(C.jsx)(fe,{}),Object(C.jsx)(Oe,{})]})},ve=function(){return Object(C.jsx)("div",{className:"App",children:Object(C.jsx)(xe,{})})},we=n(59),ge=n(113),Ee="@@APP_REDUCER/SET_ERROR",ye="@@APP_REDUCER/RESET_ERROR",_e={isError:!1,textError:""},Ae=Object(we.b)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(i.a)(Object(i.a)({},e),{},{isAppInitializated:t.isAppInitializated});case"@@APP_REDUCER/PRELOADER_TOGGLE":return Object(i.a)(Object(i.a)({},e),{},{isLoading:t.isLoading});case w:return Object(i.a)(Object(i.a)({},e),{},{isAuth:t.isAuth});default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ee:return Object(i.a)(Object(i.a)({},e),{},{isError:t.isError,textError:t.textError});case ye:return Object(i.a)(Object(i.a)({},e),{},{isError:!1,textError:""});default:return e}},login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;return"LOGIN_CASE"===t.type?Object(i.a)(Object(i.a)({},e),t.data):e},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PROFILE_CASE":return Object(i.a)(Object(i.a)({},e),t.data);case f:return Object(i.a)({},x);case"ADD-AVATAR":return Object(i.a)(Object(i.a)({},e),{},{avatar:t.avatar});default:return e}},forgetPassword:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"EMAIL_SET_CASE":case"TOOGL_SET_CASE":case"ERROR_SET_CASE":case"INFO_SET_CASE":return Object(i.a)(Object(i.a)({},e),t.payload);default:return e}},registration:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;return t.type===G?Object(i.a)(Object(i.a)({},e),t.payload):e},recoveryPasswordReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PASSWORD_CASE":case"SET_TOKEN_CASE":case"SET_ERROR_CASE":case"SET_INFO_CASE":return Object(i.a)(Object(i.a)({},e),t.payload);default:return e}}}),Se=Object(we.c)(Ae,Object(we.a)(ge.a));window.store=Se;var Ne=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,248)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};c.a.render(Object(C.jsx)(s.a,{store:Se,children:Object(C.jsx)(o.a,{basename:"/",children:Object(C.jsx)(ve,{})})}),document.getElementById("root")),Ne()},39:function(e,t,n){e.exports={dropdown:"Header_dropdown__2keX3",DropButton:"Header_DropButton__1MGSb",middleLine:"Header_middleLine__39Xas",DropdownContent:"Header_DropdownContent__3HFgI",Link:"Header_Link___xrk3"}},58:function(e,t,n){e.exports={default:"SuperButton_default__2vf1J",red:"SuperButton_red__12zn9",button:"SuperButton_button__3mVpS",blink:"SuperButton_blink__WVCCC"}},70:function(e,t,n){e.exports={containerAvatar:"profile-style_containerAvatar__1k6OI",avatar:"profile-style_avatar__1bW1-"}},72:function(e,t,n){}},[[244,1,2]]]);
//# sourceMappingURL=main.2c491509.chunk.js.map